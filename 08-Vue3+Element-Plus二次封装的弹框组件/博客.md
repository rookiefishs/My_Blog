# Vue3+Element-PlusäºŒæ¬¡å°è£…çš„å¼¹æ¡†ç»„ä»¶

### å‰è¨€: åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](https://juejin.cn/post/7348646483383746610)ä¸­ä½¿ç”¨åˆ°äº†è‡ªå·±å°è£…çš„å¼¹æ¡†ç»„ä»¶,è¿™ä¸ªç»„ä»¶æ˜¯ä¸Šä¸€å®¶å…¬å¸åˆšå…¥èŒçš„æ—¶å€™å†™çš„,è§‰å¾—ç”¨èµ·æ¥æŒºç®€å•çš„,è¿™é‡Œåˆ†äº«ä¸€ä¸‹

### 1. é¡¹ç›®åˆå§‹åŒ–(çœ‹ä¸Šä¸€ç¯‡æ–‡ç« å³å¯,é‡Œé¢æœ‰è¯¦ç»†çš„åˆå§‹åŒ–æ­¥éª¤)
### 2. ä¸‹è½½é¡¹ç›®ä¾èµ–
```js
è¿™ä¸ªå¼¹æ¡†ç»„ä»¶åªéœ€è¦element-plusç»„ä»¶åº“å³å¯

npm install element-plus
// æˆ–
yarn add element-plus
```
### 3. ç¼–å†™ç»„ä»¶
```js
// project/src/components/DialogModal/index.vue
<!--
 * @Author: wangzhiyu <w19165802736@163.com>
 * @version: 1.1.1
 * @Date: 2023-11-22 09:56:16
 * @LastEditTime: 2024-01-18 13:55:56
 * @Descripttion: å¼¹æ¡†ç»„ä»¶
-->
<template>
  <slot name="text" :row="dialog">
    <!-- é»˜è®¤å†…å®¹ -->
    <el-button type="primary" @click="dialog.visible = true">ç‚¹å‡»æ‰“å¼€å¼¹æ¡†</el-button>
  </slot>
  <el-dialog :close-on-press-escape="false" v-model="dialog.visible" :append-to-body="true" :title="title" :before-close="handleClose" :width="width" :close-on-click-modal="false" @close="close" destroy-on-close draggable="true" ref="DialogModel">
    <div :style="{ height: height }">
      <slot name="body" :row="dialog">
        <!-- é»˜è®¤å†…å®¹ -->
        å¼¹æ¡†å†…éƒ¨å†…å®¹
      </slot>
    </div>
    <template #footer>
      <span class="dialog-footer">
        <slot name="footer" :row="dialog">
          <!-- é»˜è®¤å†…å®¹ -->
          <el-button type="primary" @click="dialog.visible = false">ç¡®è®¤</el-button>
          <el-button @click="dialog.visible = false">å…³é—­</el-button>
        </slot>
      </span>
    </template>
  </el-dialog>
</template>

<script setup>
import { reactive, ref } from 'vue';

const props = defineProps({
  // å¼¹æ¡†å¤´éƒ¨æ ‡é¢˜
  title: {
    type: String,
    required: true,
  },
  // å¼¹æ¡†å®½åº¦
  width: {
    type: String,
    default: '70%',
  },
  // å¼¹æ¡†é«˜åº¦
  height: {
    type: String,
    default: '',
  },
});
const emits = defineEmits(['close']);
// å¼¹æ¡†å®ä¾‹
const DialogModel = ref();
const dialog = reactive({
  visible: false,
});
const close = () => {
  emits('close');
};
const handleClose = () => {
  dialog.visible = false;
};
const getDialogRef = () => {
  return DialogModel.value;
};
defineExpose({
  dialog,
  getDialogRef,
});
</script>
<style scoped>
.dialog-footer button:first-child {
  margin-right: 10px;
}
</style>
```

### 4. å¼¹æ¡†ç»„ä»¶æŒ‚è½½å…¨å±€
```js
// project/src/components/index.js
/*
 * @Author: wangzhiyu <w19165802736@163.com>
 * @version: 1.1.1
 * @Date: 2023-11-22 09:56:16
 * @LastEditTime: 2023-12-04 13:56:35
 * @Descripttion: å…¨å±€components
 */
import DialogModal from './DialogModal/index.vue';

// å…¨å±€æ–¹æ³•æŒ‚è½½
export function components(app) {
  app.component('DialogModal', DialogModal);
}

// project/src/main.js

// ... å…¶ä»–ä»£ç 
import { components } from './components/index';
// å…¨å±€ç»„ä»¶æŒ‚è½½
components(app);
```

### 5. ä½¿ç”¨å¼¹æ¡†ç»„ä»¶
```js
<template>
 // title: å¼¹æ¡†æ ‡é¢˜
 // ref: å¼¹æ¡†å®ä¾‹
 // @close: å¼¹æ¡†å…³é—­æ–¹æ³•
 // draggable: æ˜¯å¦å…è®¸æ‹–åŠ¨å¼¹æ¡†
 // å…¶ä»–API: ......
 <DialogModal title="å¼¹æ¡†æ ‡é¢˜" ref="dialogModalRef" @close="close" draggable="true">
     // è§¦å‘æ‰“å¼€å¼¹æ¡†çš„æŒ‰é’®
    <template #text="{ row }">
      <!-- <el-button @click="openModal(row)">æ‰“å¼€å¼¹æ¡†</el-button> -->
      <!-- è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç©ºç™½çš„spanæ˜¯ä¸ºäº†è®©é»˜è®¤çš„textæ’æ§½çš„å†…å®¹ä¸æ˜¾ç¤º,ä½¿ç”¨refè°ƒç”¨DialogModalç»„ä»¶å†…éƒ¨çš„æ–¹æ³•æ¥æ‰“å¼€å¼¹æ¡† -->
      <span></span>
    </template>
    
    <!-- å¼¹æ¡†å†…éƒ¨æ’æ§½ -->
    <template #body>
      <span>body</span>
    </template>
    
    <!-- å¼¹æ¡†åº•éƒ¨æ’æ§½ -->
    <template #footer="{row}">
       <el-button>å–æ¶ˆ</el-button>
       // å…³é—­å¼¹æ¡†
       <el-button @click="()=>row.visible=false">ç¡®å®š</el-button>
    </template>
  </DialogModal>
 </template>
 <script setup>
 // å¼¹æ¡†å®ä¾‹
 const dialogModalRef = ref();
 
 // è¡¥å……:
 // dialogModalRef.value.dialog.visible å±æ€§å¯ä»¥æ§åˆ¶å¼¹æ¡†çš„æ˜¾ç¤ºéšè—
 // å¼¹æ¡†ç»„ä»¶å†…éƒ¨çš„æ‰€æœ‰æŠ›å‡ºçš„API,dialogModalReféƒ½å¯ä»¥è°ƒç”¨
 </script>
```

### 6. æ•ˆæœå›¾: 

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8319ed13b8124780a1ec18b240fd800f~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1920&h=911&s=49018&e=png&b=7f7f7f)


### 7. æ€»ç»“: ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨Vue3äºŒæ¬¡å°è£…çš„Element-Plus,è¿™ä¸ªç»„ä»¶çš„è‡ªå®šä¹‰æ€§éå¸¸å¼º,ä½†æ˜¯åŒæ ·çš„,ä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦,ç”¨æ³•ä¹Ÿæ¯”è¾ƒå¤š,æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±æŒ–æ˜ä¸€ä¸‹å“¦ğŸ˜‹